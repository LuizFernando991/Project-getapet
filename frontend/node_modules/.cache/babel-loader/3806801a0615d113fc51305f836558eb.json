{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport api from '../helpers/api';\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useFlashMessage } from './useFlashMessage';\nexport const useAuth = () => {\n  _s();\n\n  const {\n    setFlashMessage\n  } = useFlashMessage();\n  const [useNavigate, setAuthenticated] = useState(false);\n  const navigate = useNavigate();\n\n  const register = async user => {\n    let msgText = 'Cadastro realizado com sucesso!';\n    let msgType = 'success';\n\n    try {\n      const data = await api.post('/users/register', user);\n      const resData = data.data;\n      await authUser(resData);\n    } catch (err) {\n      msgText = err.response.data.message;\n      msgType = 'error';\n    }\n\n    setFlashMessage(msgText, msgType);\n  };\n\n  const authUser = async data => {\n    setAuthenticated(true);\n    localStorage.setItem('token', JSON.stringify(data.token));\n    navigate('/', {\n      replace: true\n    });\n  };\n\n  return {\n    register\n  };\n};\n\n_s(useAuth, \"k64RxNcfpXIhMCVuplhjR5ENot0=\", false, function () {\n  return [useFlashMessage, useNavigate];\n});","map":{"version":3,"sources":["E:/Programação/Node.js/Projeto-GetAPet/frontend/src/hooks/useAuth.js"],"names":["api","useState","useEffect","useNavigate","useFlashMessage","useAuth","setFlashMessage","setAuthenticated","navigate","register","user","msgText","msgType","data","post","resData","authUser","err","response","message","localStorage","setItem","JSON","stringify","token","replace"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,gBAAhB;AAEA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,eAAT,QAAgC,mBAAhC;AAOA,OAAO,MAAMC,OAAO,GAAE,MAAI;AAAA;;AAEtB,QAAM;AAAEC,IAAAA;AAAF,MAAsBF,eAAe,EAA3C;AAEA,QAAM,CAAED,WAAF,EAAeI,gBAAf,IAAoCN,QAAQ,CAAC,KAAD,CAAlD;AAEA,QAAMO,QAAQ,GAAGL,WAAW,EAA5B;;AAEA,QAAMM,QAAQ,GAAE,MAAOC,IAAP,IAAc;AAE1B,QAAIC,OAAO,GAAG,iCAAd;AACA,QAAIC,OAAO,GAAG,SAAd;;AAEA,QAAG;AACC,YAAMC,IAAI,GAAG,MAAMb,GAAG,CAACc,IAAJ,CAAS,iBAAT,EAA4BJ,IAA5B,CAAnB;AAGA,YAAMK,OAAO,GAAGF,IAAI,CAACA,IAArB;AAEA,YAAMG,QAAQ,CAACD,OAAD,CAAd;AAIH,KAVD,CAUC,OAAME,GAAN,EAAU;AACPN,MAAAA,OAAO,GAAGM,GAAG,CAACC,QAAJ,CAAaL,IAAb,CAAkBM,OAA5B;AACAP,MAAAA,OAAO,GAAG,OAAV;AACH;;AAGDN,IAAAA,eAAe,CAACK,OAAD,EAAUC,OAAV,CAAf;AACH,GAtBD;;AAwBA,QAAMI,QAAQ,GAAG,MAAMH,IAAN,IAAa;AAG1BN,IAAAA,gBAAgB,CAAC,IAAD,CAAhB;AAEAa,IAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BC,IAAI,CAACC,SAAL,CAAeV,IAAI,CAACW,KAApB,CAA9B;AAEAhB,IAAAA,QAAQ,CAAC,GAAD,EAAM;AAACiB,MAAAA,OAAO,EAAG;AAAX,KAAN,CAAR;AAGH,GAVD;;AAYA,SAAO;AAAChB,IAAAA;AAAD,GAAP;AAEH,CA9CM;;GAAMJ,O;UAEmBD,e,EAIXD,W","sourcesContent":["import api from '../helpers/api'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { useFlashMessage } from './useFlashMessage'\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport const useAuth= ()=>{\r\n\r\n    const { setFlashMessage } = useFlashMessage()\r\n\r\n    const [ useNavigate, setAuthenticated ] = useState(false)\r\n\r\n    const navigate = useNavigate()\r\n\r\n    const register= async (user)=>{\r\n\r\n        let msgText = 'Cadastro realizado com sucesso!'\r\n        let msgType = 'success'\r\n\r\n        try{\r\n            const data = await api.post('/users/register', user)\r\n\r\n\r\n            const resData = data.data\r\n\r\n            await authUser(resData)\r\n\r\n\r\n\r\n        }catch(err){\r\n            msgText = err.response.data.message\r\n            msgType = 'error'\r\n        }\r\n\r\n\r\n        setFlashMessage(msgText, msgType)\r\n    }\r\n\r\n    const authUser = async(data)=>{\r\n\r\n\r\n        setAuthenticated(true)\r\n\r\n        localStorage.setItem('token', JSON.stringify(data.token))\r\n\r\n        navigate('/', {replace : true})\r\n\r\n\r\n    }\r\n\r\n    return {register}\r\n\r\n}"]},"metadata":{},"sourceType":"module"}