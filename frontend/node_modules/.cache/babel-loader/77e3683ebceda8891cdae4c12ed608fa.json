{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useNavigate } from 'react-router-dom';\nimport { useCallback } from 'react';\nimport api from \"../helpers/api\";\nimport { useFlashMessage } from '../hooks/useFlashMessage';\nexport const usePet = () => {\n  _s();\n\n  const navigate = useNavigate();\n  const [setFlashMessage] = useFlashMessage();\n  const getPetById = useCallback(async id => {\n    const pet = await api.get(`/pets/${id}`, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`,\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    return pet.data.pet;\n  }, []);\n  const getAllPets = useCallback(async page => {\n    const pets = await api.get(`/pets?page=${page}`);\n    return pets.data;\n  }, []);\n  const getNewPets = useCallback(async id => {\n    const pet = await api.get(`/pets/newpets`);\n    return pet.data.pets;\n  }, []);\n\n  const createPet = async pet => {\n    let msgType = 'success';\n    let formData = new FormData();\n    await Object.keys(pet).forEach(key => {\n      if (key === 'images') {\n        for (let i = 0; i < pet[key].length; i++) {\n          formData.append('images', pet[key][i]);\n        }\n      } else {\n        formData.append(key, pet[key]);\n      }\n    });\n    const data = await api.post(`/pets/create`, formData, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`,\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      return response.data;\n    }).catch(err => {\n      msgType = 'error';\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n\n    if (msgType === 'success') {\n      navigate('/mypets');\n    }\n  };\n\n  const removePet = async id => {\n    let msgType = 'success';\n    const data = await api.delete(`/pets/${id}`, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`\n      }\n    }).then(response => {\n      return response.data;\n    }).catch(err => {\n      msgType = 'error';\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n  };\n\n  const editPet = async pet => {\n    let msgType = 'success';\n    let formData = new FormData();\n    Object.keys(pet).forEach(key => {\n      if (key === 'images') {\n        for (let i = 0; i < pet[key].length; i++) {\n          formData.append('images', pet[key][i]);\n        }\n      } else {\n        formData.append(key, pet[key]);\n      }\n    });\n    const data = await api.patch(`/pets/${pet._id}`, formData, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`,\n        'Content-Type': 'multipart/form-data'\n      }\n    }).then(response => {\n      return response.data;\n    }).catch(err => {\n      msgType = 'error';\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n\n    if (msgType === 'success') {\n      navigate('/mypets');\n    }\n  };\n\n  const getSchedule = async id => {\n    if (!localStorage.getItem('token')) {\n      navigate('/login');\n      return;\n    }\n\n    let msgType = 'success';\n    const data = await api.patch(`pets/schedule/${id}`, {\n      headers: {\n        Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`\n      }\n    }).then(res => {\n      return res.data;\n    }).catch(err => {\n      msgType = 'error';\n      console.log(err.response);\n      return err.response.data;\n    });\n    setFlashMessage(data.message, msgType);\n  };\n\n  return {\n    createPet,\n    removePet,\n    getPetById,\n    editPet,\n    getNewPets,\n    getAllPets,\n    getSchedule\n  };\n};\n\n_s(usePet, \"QkT8mHfDWnNixLwktmlh2Z7bys0=\", false, function () {\n  return [useNavigate, useFlashMessage];\n});","map":{"version":3,"sources":["E:/Programação/Node.js/Projeto-GetAPet/frontend/src/hooks/usePet.js"],"names":["useNavigate","useCallback","api","useFlashMessage","usePet","navigate","setFlashMessage","getPetById","id","pet","get","headers","Authorization","JSON","parse","localStorage","getItem","data","getAllPets","page","pets","getNewPets","createPet","msgType","formData","FormData","Object","keys","forEach","key","i","length","append","post","then","response","catch","err","message","removePet","delete","editPet","patch","_id","getSchedule","res","console","log"],"mappings":"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","sourcesContent":["import { useNavigate } from 'react-router-dom'\r\nimport { useCallback } from 'react'\r\nimport api from \"../helpers/api\"\r\nimport { useFlashMessage } from '../hooks/useFlashMessage'\r\n\r\nexport const usePet = ()=>{\r\n    \r\n    const navigate = useNavigate()\r\n\r\n    const [ setFlashMessage ] = useFlashMessage()\r\n\r\n    const getPetById = useCallback(async(id)=>{\r\n        \r\n        const pet = await api.get(`/pets/${id}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`,\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n\r\n\r\n        return (pet.data.pet)\r\n    }, [])\r\n\r\n    const getAllPets = useCallback(async(page)=>{\r\n        \r\n        const pets = await api.get(`/pets?page=${page}`)\r\n        return (pets.data)\r\n    }, [])\r\n\r\n    const getNewPets = useCallback(async(id)=>{\r\n        \r\n        const pet = await api.get(`/pets/newpets`)\r\n\r\n\r\n        return (pet.data.pets)\r\n    }, [])\r\n\r\n    const createPet = async (pet)=>{\r\n        let msgType = 'success'\r\n\r\n        let formData = new FormData()\r\n\r\n        await Object.keys(pet).forEach((key) =>{\r\n            if(key === 'images'){\r\n                for(let i = 0; i < pet[key].length; i++){\r\n                    formData.append('images', pet[key][i])\r\n                }\r\n\r\n            }else{\r\n                formData.append(key, pet[key])\r\n            }\r\n        })\r\n\r\n        const data = await api\r\n        .post(`/pets/create`, formData, {\r\n            headers: {\r\n                Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`,\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        })\r\n        .then((response) => {\r\n            \r\n            return response.data\r\n        })\r\n        .catch((err) => {\r\n            \r\n            msgType = 'error'\r\n            return err.response.data\r\n        })\r\n        \r\n        setFlashMessage(data.message, msgType)\r\n        if(msgType === 'success'){\r\n            navigate('/mypets')\r\n        }\r\n\r\n    }\r\n\r\n    const removePet = async(id)=>{\r\n\r\n        let msgType = 'success'\r\n\r\n        const data = await api.delete(`/pets/${id}`, {\r\n            headers: {\r\n                Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`\r\n            }\r\n        }).then((response)=>{\r\n            return response.data\r\n        }).catch((err)=>{\r\n            msgType = 'error'\r\n            return err.response.data\r\n        })\r\n\r\n        setFlashMessage(data.message, msgType)\r\n    }\r\n\r\n    const editPet = async(pet)=>{\r\n\r\n        let msgType = 'success'\r\n        let formData = new FormData()\r\n\r\n\r\n        Object.keys(pet).forEach((key)=>{\r\n            if(key === 'images'){\r\n                for(let i = 0; i < pet[key].length; i++){\r\n                    formData.append('images', pet[key][i])\r\n                }\r\n            }else{\r\n                formData.append(key, pet[key])\r\n            }\r\n        })\r\n\r\n        const data = await api\r\n        .patch(`/pets/${pet._id}`, formData, {\r\n            headers : {\r\n                Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`,\r\n                'Content-Type': 'multipart/form-data'\r\n            }\r\n        }).then((response)=>{\r\n            return response.data\r\n        }).catch((err)=>{\r\n            msgType = 'error'\r\n            return err.response.data\r\n        })\r\n        \r\n        setFlashMessage(data.message, msgType)\r\n        if(msgType === 'success'){\r\n            navigate('/mypets')\r\n        }\r\n\r\n    }\r\n\r\n    const getSchedule = async(id)=>{\r\n\r\n        if(!localStorage.getItem('token')){\r\n            navigate('/login')\r\n            return\r\n        }\r\n        let msgType = 'success'\r\n        const data = await api.patch(`pets/schedule/${id}`, {\r\n            headers : {\r\n                Authorization: `Bearer ${JSON.parse(localStorage.getItem('token'))}`\r\n            }\r\n        }).then((res)=>{\r\n            return res.data\r\n        }\r\n        ).catch((err)=>{\r\n            msgType = 'error'\r\n            console.log(err.response)\r\n            return err.response.data\r\n        })\r\n\r\n        setFlashMessage(data.message, msgType)\r\n    }\r\n\r\n    return { createPet, removePet, getPetById, editPet, getNewPets, getAllPets, getSchedule }\r\n}"]},"metadata":{},"sourceType":"module"}